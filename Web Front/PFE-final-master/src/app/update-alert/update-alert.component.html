<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.4.1/font/bootstrap-icons.min.css">
</head>
<body>
  <app-menu></app-menu>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6" *ngIf="alert">
        <div class="card">
          <div class="card-header">
            Update Alert
          </div>
          <div class="card-body">
            <form #alertForm="ngForm" (ngSubmit)="onUpdateAlert()" novalidate>
              <div class="form-group" hidden>
                <label for="userId">User ID</label>
                <input type="text" id="userId" class="form-control" name="userId" [(ngModel)]="alert.userId" readonly>
              </div>

              <div class="form-group">
                <label for="name">Name</label>
                <input type="text" id="name" class="form-control" name="name" [(ngModel)]="alert.name" required>
              </div>

              <div class="form-group">
                <label>Type</label>
                <div class="form-check form-check-inline">
                  <input type="radio" id="typeFutures" name="type" value="futures" [(ngModel)]="alert.type" (change)="updateMetrics()" class="form-check-input" required>
                  <label class="form-check-label" for="typeFutures">Futures</label>
                </div>
                <div class="form-check form-check-inline">
                  <input type="radio" id="typeOptions" name="type" value="options" [(ngModel)]="alert.type" (change)="updateMetrics()" class="form-check-input" required>
                  <label class="form-check-label" for="typeOptions">Options</label>
                </div>
              </div>

              <div class="form-group">
                <label for="fieldName">Metric</label>
                <select id="fieldName" class="form-control" name="fieldName" [(ngModel)]="alert.fieldName" required>
                  <option *ngFor="let metric of availableMetrics" [value]="metric">{{ getDisplayName(metric) }}</option>
                </select>
              </div>

              <div class="form-group">
                <label for="operator">Operator</label>
                <select id="operator" class="form-control" name="operator" [(ngModel)]="alert.operator" required>
                  <option value=">">Greater Than</option>
                  <option value="<">Less Than</option>
                  <option value="=">Equal To</option>
                  <option value="!=">Not Equal To</option>
                  <option value=">=">Greater Than or Equal To</option>
                  <option value="<=">Less Than or Equal To</option>
                </select>
              </div>

              <div class="form-group">
                <label for="triggerFrequency">Trigger Frequency</label>
                <select class="form-control" id="triggerFrequency" name="triggerFrequency" [(ngModel)]="alert.triggerFrequency" required>
                  <option value="1min">Every 1 Minute</option>
                  <option value="5min">Every 5 Minutes</option>
                  <option value="24h">Every 24 Hours</option>
                </select>
              </div>

              <div class="form-group">
                <label for="threshold">Value</label>
                <input type="number" id="threshold" class="form-control" name="threshold" [(ngModel)]="alert.threshold" required>
              </div>

              <div class="form-group">
                <label for="emailNotification">Email Notification</label>
                <select id="emailNotification" class="form-control" name="emailNotification" [(ngModel)]="alert.emailNotification" required>
                  <option [value]="true">Yes</option>
                  <option [value]="false">No</option>
                </select>
              </div>

              <div class="text-center">
                <button type="submit" class="btn btn-primary" [disabled]="!alertForm.valid">Update Alert</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
